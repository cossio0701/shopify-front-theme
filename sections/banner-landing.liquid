{%- comment -%}
  Banner Landing Section
  Renders a single responsive image (100% width, auto height) from the first active banner based on priority order and date validation.
  Uses date-visibility snippet for date checks.
  Banners are stored in shop metafields (namespace: banner_landing, key: banners, structure: { "items": [...] }).
{%- endcomment -%}

{%- assign banners = shop.metafields.banner_landing.banners.value -%}

{%- if banners -%}
  {%- for banner in banners -%}
    {%- capture is_visible -%}
      {%- render 'date-visibility', start_date: banner.start_date, end_date: banner.end_date -%}
    {%- endcapture -%}

    {%- if is_visible == 'true' -%}
      <a href="{{ banner.url }}" class="banner-landing__link">
        <picture>
          <source media="(max-width: 767px)" srcset="{{ banner.mobile_image | default: banner.desktop_image }}">
          <img
            src="{{ banner.desktop_image }}"
            alt="{{ banner.alt | default: 'Banner image' }}"
            width="1200"
            height="600"
            style="width: 100%; height: auto;"
            class="banner-landing__image"
          >
        </picture>
      </a>
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}
{%- endif -%}

{%- schema -%}
{
  "name": "Banner Landing",
  "tag": "section",
  "class": "banner-landing",
  "settings": [],
  "presets": [
    {
      "name": "Banner Landing"
    }
  ]
}
{%- endschema -%}
