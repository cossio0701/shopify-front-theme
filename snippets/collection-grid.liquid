{% comment %}
  Collection Grid Component - Reusable product grid with multiple view modes

  Accepts:
  - products: {Array} Array of products to display
  - section_id: {String} Section ID for dynamic styling
  - enable_view_toggle: {Boolean} Show view mode toggle buttons
  - show_empty_state: {Boolean} Show empty state message

  Usage:
  {%- render 'collection-grid',
    products: collection.products,
    section_id: section.id,
    enable_view_toggle: section.settings.enable_view_toggle
  -%}
{% endcomment %}

{%- liquid
  assign products = products | default: empty_array
  assign section_id = section_id | default: ''
  assign enable_view_toggle = enable_view_toggle | default: false
  assign show_empty_state = show_empty_state | default: true
-%}

{%- if enable_view_toggle -%}
  <collection-grid-view-toggle class="collection-grid__view-toggle">
    <span class="collection-grid__view-label">{{ 'collection.view' | t }}</span>

    <button
      class="collection-grid__view-btn"
      data-view="col-1"
      aria-pressed="false"
      aria-label="{{ 'collection.view_single' | t }}"
      title="{{ 'collection.view_single' | t }}"
    >
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <line x1="3" y1="3" x2="21" y2="3"></line>
        <line x1="3" y1="9" x2="21" y2="9"></line>
        <line x1="3" y1="15" x2="21" y2="15"></line>
        <line x1="3" y1="21" x2="21" y2="21"></line>
      </svg>
    </button>

    <button
      class="collection-grid__view-btn"
      data-view="col-2"
      aria-pressed="false"
      aria-label="{{ 'collection.view_double' | t }}"
      title="{{ 'collection.view_double' | t }}"
    >
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect x="3" y="3" width="9" height="9"></rect>
        <rect x="12" y="3" width="9" height="9"></rect>
        <rect x="3" y="12" width="9" height="9"></rect>
        <rect x="12" y="12" width="9" height="9"></rect>
      </svg>
    </button>

    <button
      class="collection-grid__view-btn"
      data-view="col-4"
      aria-pressed="true"
      aria-label="Four columns"
      title="Four columns"
    >
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect x="2" y="2" width="4" height="4"></rect>
        <rect x="8" y="2" width="4" height="4"></rect>
        <rect x="14" y="2" width="4" height="4"></rect>
        <rect x="20" y="2" width="2" height="4"></rect>
        <rect x="2" y="8" width="4" height="4"></rect>
        <rect x="8" y="8" width="4" height="4"></rect>
        <rect x="14" y="8" width="4" height="4"></rect>
        <rect x="20" y="8" width="2" height="4"></rect>
        <rect x="2" y="14" width="4" height="4"></rect>
        <rect x="8" y="14" width="4" height="4"></rect>
        <rect x="14" y="14" width="4" height="4"></rect>
        <rect x="20" y="14" width="2" height="4"></rect>
        <rect x="2" y="20" width="4" height="2"></rect>
        <rect x="8" y="20" width="4" height="2"></rect>
        <rect x="14" y="20" width="4" height="2"></rect>
        <rect x="20" y="20" width="2" height="2"></rect>
      </svg>
    </button>

    <button
      class="collection-grid__view-btn"
      data-view="editorial"
      aria-pressed="false"
      aria-label="{{ 'collection.view_editorial' | t }}"
      title="{{ 'collection.view_editorial' | t }}"
    >
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect x="3" y="3" width="5" height="5"></rect>
        <rect x="10" y="3" width="11" height="5"></rect>
        <rect x="3" y="10" width="5" height="5"></rect>
        <rect x="10" y="10" width="5" height="5"></rect>
        <rect x="17" y="10" width="4" height="5"></rect>
        <rect x="3" y="17" width="18" height="4"></rect>
      </svg>
    </button>
  </collection-grid-view-toggle>
{%- endif -%}

<div class="collection-grid view-col-4" data-section-id="{{ section_id }}">
  {%- if products.size == 0 and show_empty_state -%}
    <div class="collection-grid__empty">
      <h3 class="collection-grid__empty-title">
        {{- 'collection.no_products' | t -}}
      </h3>
    </div>
  {%- else -%}
    {%- for product in products -%}
      <div class="collection-grid__item">
        {%- render 'card-product', product_ref: product, section_id: section_id -%}
      </div>
    {%- endfor -%}
  {%- endif -%}
</div>
